# .github/workflows/enforcer.yaml
name: 'Pull Request Validation'

on:
  pull_request:
    branches: [main, dev, alpha]

jobs:
  check_branch:
    runs-on: ubuntu-latest
    steps:
      - name: Check if PR is to main
        if: github.head_ref == 'main' && github.base_ref != 'alpha'
        run: |
          echo "ERROR: You can only merge to main from alpha."
          exit 1

      - name: Check if PR is to alpha
        if: github.head_ref == 'alpha' && github.base_ref != 'dev'
        run: |
          echo "ERROR: You can only merge to alpha from dev."
          exit 1

      - name: Check if PR is to dev and has feature/ prefix
        if: github.head_ref == 'dev' && !startsWith(github.base_ref, 'feature/')
        run: |
          echo "ERROR: You can only merge to dev from branches prefixed with 'feature/'."
          exit 1
